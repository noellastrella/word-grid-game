(()=>{let tiles=[],randomtimer=10,minTimer=20,tempI=0,words=[],wordsGuessed=[],score=0,selectedLetters=[];const tileCount=25,letters=[{letter:"A",val:1},{letter:"B",val:2},{letter:"C",val:3},{letter:"D",val:4},{letter:"E",val:1},{letter:"F",val:5},{letter:"G",val:5},{letter:"H",val:4},{letter:"I",val:1},{letter:"J",val:7},{letter:"K",val:8},{letter:"L",val:3},{letter:"M",val:3},{letter:"N",val:3},{letter:"O",val:1},{letter:"P",val:3},{letter:"Q",val:7},{letter:"R",val:2},{letter:"S",val:2},{letter:"T",val:2},{letter:"U",val:1},{letter:"V",val:5},{letter:"W",val:5},{letter:"X",val:7},{letter:"Y",val:8},{letter:"Z",val:10},{letter:"A",val:1},{letter:"E",val:1},{letter:"I",val:1},{letter:"O",val:1},{letter:"U",val:1}];var wordFile="./js/wordlist/wordsFiltered.json?num="+Math.random();function init(){for(let i=0;i<25;i++)tiles.push(createTile()),populateTile(tiles[i],letters[Math.floor(Math.random()*letters.length)]),document.querySelector("#game-grid").appendChild(tiles[i]),tiles[i].addEventListener("click",addLetter);document.querySelector("#submit").addEventListener("click",checkWord),document.querySelector("#clear").addEventListener("click",clearLetters),render()}function render(){tempI++,tiles.reduce((acc,curr)=>{let expireTime,timeRemaining=curr.dataset.timer-Date.now(),setTime=curr.dataset.time;return timeRemaining>0?(curr.dataset.remaining=timeRemaining,curr.style=`background-image: linear-gradient(to bottom,  #FFF ${100-timeRemaining/setTime*100}%,  #0F0 1%,  #0F0 100%);  `,curr.dataset.x=timeRemaining/setTime,acc.push(curr)):curr.classList.contains("hide")||(curr.classList.add("hide"),removeLetter(curr)),acc},[]),window.requestAnimationFrame(render)}function removeLetter(el){console.log(el),el.classList.remove("tile-selected"),selectedLettersTemp=selectedLetters.reduce((acc,curr)=>(console.log(el.id,curr.target.id,curr,el.id!=curr.target.id),el.id!=curr.target.id&&(acc=[...acc,curr]),acc),[]),selectedLetters=selectedLettersTemp}function addLetter(el){el.target.classList.contains("tile-selected")?removeLetter(el.target):(el.target.classList.add("tile-selected"),selectedLetters.push(el)),checkWord(),updateState()}function updateState(){let wordTemp="";selectedLetters.forEach(e=>{wordTemp+=e.target.dataset.letter}),document.querySelector("#words-used").innerHTML=wordsGuessed.reduce((acc,curr)=>acc+`<li>${curr.word} | ${curr.score}</li>`,""),document.querySelector("#word").innerHTML=wordTemp,document.querySelector("#score").innerHTML=score}function clearLetters(){selectedLetters.forEach(e=>{console.log(e.target.classList),e.target.classList.remove("tile-selected")},[]),selectedLetters=[],updateState()}function checkWord(){let wordTemp=selectedLetters.reduce((arr,curr)=>(console.log(curr.target.dataset),arr+curr.target.dataset.letter),"").toLowerCase(),currScore=0;words.includes(wordTemp)&&(console.log("IS WORD"),selectedLetters.forEach(e=>{populateTile(e.target,letters[Math.floor(Math.random()*letters.length)]),e.target.classList.remove("tile-selected"),currScore+=Number(e.target.dataset.score)}),score+=currScore*selectedLetters.length,wordsGuessed.push({word:wordTemp,score:currScore}),selectedLetters=[]),updateState()}function resetState(){score=0,selectedLetters=[],wordsGuessed=[]}function createTile(){let el=document.createElement("div"),tile=document.createElement("div"),letter=document.createElement("div"),score=document.createElement("sup");return el.classList.add("tile-container"),tile.classList.add("tile"),letter.classList.add("letter"),score.classList.add("score"),el.appendChild(tile),tile.appendChild(letter),tile.appendChild(score),el}function populateTile(el,o){let timer=Date.now()+1e3*(10*Math.random()+20);el.setAttribute("data-letter",o.letter),el.setAttribute("data-score",o.val),el.setAttribute("data-timer",timer),el.setAttribute("data-remaining",timer-Date.now()),el.setAttribute("data-time",timer-Date.now()),el.setAttribute("id",o.letter+"-"+Math.round(1e5*Math.random())),el.querySelector(".letter").innerHTML=o.letter,el.querySelector(".score").innerHTML=o.val}fetch(wordFile).then(response=>{if(!response.ok)throw new Error("Network response was not ok");return response.json()}).then(data=>{words=data.reduce((acc,curr)=>(curr.length>3&&acc.push(curr),acc),[]),init()}).catch(error=>console.error("Fetch error:",error))})();